; {{ ansible_managed }}

[program:central]

command=npm start "{\"ENVIRONMENT\": \"{{ cluster }}\", \"HOSTNAME\": \"{{ inventory_hostname }}\", \"HTTP_LISTEN_ADDRESS\": \"0.0.0.0\", \"MONGO_USERNAME\": \"{{ mongo_username }}\", \"MONGO_PASSWORD\": \"{{ mongo_password }}\", \"VIZ_LISTEN_ADDRESS\": \"0.0.0.0\", \"LOG_FILE\": \"/var/log/graphistry-json/%(program_name)s.log\", \"LOG_LEVEL\": \"INFO\", \"MONGO_HOSTS\": [\"{{ mongo_host }}\"], \"ALLOW_MULTIPLE_VIZ_CONNECTIONS\": false, \"PINGER_ENABLED\": true, \"CLUSTER\": \"{{ cluster }}\", \"DATABASE\": \"{{ mongo_name }}\", \"MONGO_DATABASE\": \"{{ mongo_name }}\"}"
directory={{ graphistry_install_path }}/central
environment=

process_name=%(program_name)s
numprocs=1
numprocs_start=0

user=www
umask=002

stdout_logfile=/var/log/central-app/%(program_name)s.stdout.log
stdout_logfile_maxbytes=10MB

redirect_stderr=false
stderr_logfile=/var/log/central-app/%(program_name)s.stderr.log
stderr_logfile_maxbytes=10MB

autostart=true
autorestart=true

stopasgroup=true
